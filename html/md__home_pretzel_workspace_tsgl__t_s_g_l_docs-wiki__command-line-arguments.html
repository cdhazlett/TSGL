<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>TSGL: Command-line-arguments</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TSGL
   </div>
   <div id="projectbrief">A thread-safe graphics library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Command-line-arguments </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>***STILL A WORK IN PROGRESS***</p>
<p>Love giving commands? This is the page for you!</p>
<p>To begin, in the "tests" subfolder of the "src" folder of the TSGL source code there are a plethora of tests that you can launch individually.</p>
<p>Some of these tests take in command-line arguments. Command-line arguments are values which you pass whenever you execute a test file from the command-line (for Linux: ./testName argument1 argument2 ...).</p>
<p>These arguments can change something within the code; this ranges from the width and height of the Canvas screen to the number of threads to use when drawing something.</p>
<p>How do we give command-line capabilities to new animations though?</p>
<p>We're about to find out.</p>
<p>Begin by creating a file and name it command.cpp.</p>
<p>Let's start with skeleton code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacetsgl.html">tsgl</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 500, <span class="stringliteral">&quot;Command-line Example&quot;</span>, FRAME);</div>
<div class="line">  c.start();</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Compile and run. A blank gray screen should appear.</p>
<p>Now, how can we add the ability to take in command-line arguments? Sounds complicated.</p>
<p>Its actually fairly simple:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacetsgl.html">tsgl</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]) {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 500, <span class="stringliteral">&quot;Command-line Example&quot;</span>, FRAME);</div>
<div class="line">  c.start();</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Notice how we add parameters to the main method? This is the standard way to receive arguments from the command-line. The argc parameter is the number of arguments passed and the argv parameter is the array containing the arguments (with index 0 being the name of the program).</p>
<p>Here's a way to get the arguments passed from the command-line and into the code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacetsgl.html">tsgl</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]) {</div>
<div class="line">  <span class="keywordtype">int</span> width = atoi(argv[1]), height = atoi(argv[2]);  <span class="comment">//Get the width and height from the command-line</span></div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, width, height, <span class="stringliteral">&quot;Command-line Example&quot;</span>, FRAME);  <span class="comment">//Pass them as parameters</span></div>
<div class="line">  c.start();</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Since the types of elements in argv are char pointers, we need to convert them into integers for this example in order to use them for the width and the height of the Canvas.</p>
<p><code>atoi()</code> converts alphabet characters into integers.</p>
<p>Compile the code. Now that we have added command-line argument capabilities to our code, we <em>MUST</em> pass some of them.</p>
<p>Attempting to run the code without command-line arguments now will trigger a segmentation fault (an error).</p>
<p>To run a program with command-line arguments depends on your system's OS. There are videos that can show you how to run an individual test file in the TSGL bin folder from the command-line:</p>
<ul>
<li>Linux/Mac: <a href="https://www.youtube.com/watch?v=ASMtIoJFJVI">https://www.youtube.com/watch?v=ASMtIoJFJVI</a></li>
<li>Windows:</li>
</ul>
<p>This code is being run on a Linux machine, so the tutorial will continue using this format.</p>
<p>When you run the code with command-line arguments, the screen should appear but in a different size.</p>
<p>But wait...what happens when someone accidentally forgets to put in a command-line argument? The code will seg fault regardless!</p>
<p>To avert this, we need to place a few checks in the code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacetsgl.html">tsgl</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]) {</div>
<div class="line">  <span class="keywordtype">int</span> width = (argc &gt; 1) ? atoi(argv[1]) : 600; <span class="comment">//Checks for command-line arguments</span></div>
<div class="line">  <span class="keywordtype">int</span> height = (argc &gt; 2) ? atoi(argv[2]) : 800;</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, width, height, <span class="stringliteral">&quot;Command-line Example&quot;</span>, FRAME);  <span class="comment">//Pass them as parameters</span></div>
<div class="line">  c.start();</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Now compile and run the code without command-line arguments. The window should still appear without causing a seg fault.</p>
<p>The checks are essentially conditional operators that are laid out as follows:</p>
<p>(conditional statement) ? expression_if_true : expression_if_false;</p>
<p>What this means is that it evaluates a conditional statement (usually a boolean expression) and if it evaluates to true then it assigns the first expression and if it evaluates to false then it assigns the second expression to the variable.</p>
<p>In a nutshell, think of it as a one-line if-else statement.</p>
<p>Now, what about invalid widths and heights? We can't have a negative value or 0!</p>
<p>To avert this, we need one more check:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacetsgl.html">tsgl</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]) {</div>
<div class="line">  <span class="keywordtype">int</span> width = (argc &gt; 1) ? atoi(argv[1]) : 600;  <span class="comment">//Checks for command-line arguments</span></div>
<div class="line">  <span class="keywordtype">int</span> height = (argc &gt; 2) ? atoi(argv[2]) : 800;</div>
<div class="line">  <span class="keywordflow">if</span>(width &lt;= 0 || height &lt;= 0) {  <span class="comment">//Check for negative or zero values</span></div>
<div class="line">    width = height = 800;  <span class="comment">//Set defaults if invalid widths or heights</span></div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, width, height, <span class="stringliteral">&quot;Command-line Example&quot;</span>, FRAME);  <span class="comment">//Pass them as parameters</span></div>
<div class="line">  c.start();</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Compile and run the code with a negative value or 0. The window should still appear without causing any problems.</p>
<p>In sum, to add command-line arguments to your animation, you <em>MUST</em> edit the main() method signature so that it looks like this:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]) {</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --><p>Then, you can use the second argument, <code>argv</code>, in order to get arguments passed from the command-line.</p>
<p>You must then include any checks to make sure there have been command-line arguments passed and then make sure those arguments are valid for you animation.</p>
<p>That concludes this tutorial!</p>
<p>In the final one, "Bringing It All Together", we recap everything we've seen into an example with threading! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 3 2015 10:59:31 for TSGL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
