$\ast$$\ast$$\ast$\+S\+T\+I\+L\+L A W\+O\+R\+K I\+N P\+R\+O\+G\+R\+E\+S\+S$\ast$$\ast$$\ast$

Love giving commands? This is the page for you!

To begin, in the \char`\"{}tests\char`\"{} subfolder of the \char`\"{}src\char`\"{} folder of the T\+S\+G\+L source code there are a plethora of tests that you can launch individually.

Some of these tests take in command-\/line arguments. Command-\/line arguments are values which you pass whenever you execute a test file from the command-\/line (for Linux\+: ./test\+Name argument1 argument2 ...).

These arguments can change something within the code; this ranges from the width and height of the Canvas screen to the number of threads to use when drawing something.

How do we give command-\/line capabilities to new animations though?

We\textquotesingle{}re about to find out.

Begin by creating a file and name it command.\+cpp.

Let\textquotesingle{}s start with skeleton code\+:


\begin{DoxyCode}
\textcolor{preprocessor}{#include <tsgl.h>}
\textcolor{keyword}{using namespace }\hyperlink{namespacetsgl}{tsgl};

\textcolor{keywordtype}{int} main() \{
  \hyperlink{classtsgl_1_1_canvas}{Canvas} c(0, 0, 500, 500, \textcolor{stringliteral}{"Command-line Example"}, FRAME);
  c.start();
  c.wait();
\}
\end{DoxyCode}


Compile and run. A blank gray screen should appear.

Now, how can we add the ability to take in command-\/line arguments? Sounds complicated.

Its actually fairly simple\+:


\begin{DoxyCode}
\textcolor{preprocessor}{#include <tsgl.h>}
\textcolor{keyword}{using namespace }\hyperlink{namespacetsgl}{tsgl};

\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} * argv[]) \{
  \hyperlink{classtsgl_1_1_canvas}{Canvas} c(0, 0, 500, 500, \textcolor{stringliteral}{"Command-line Example"}, FRAME);
  c.start();
  c.wait();
\}
\end{DoxyCode}


Notice how we add parameters to the main method? This is the standard way to receive arguments from the command-\/line. The argc parameter is the number of arguments passed and the argv parameter is the array containing the arguments (with index 0 being the name of the program).

Here\textquotesingle{}s a way to get the arguments passed from the command-\/line and into the code\+:


\begin{DoxyCode}
\textcolor{preprocessor}{#include <tsgl.h>}
\textcolor{keyword}{using namespace }\hyperlink{namespacetsgl}{tsgl};

\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} * argv[]) \{
  \textcolor{keywordtype}{int} width = atoi(argv[1]), height = atoi(argv[2]);  \textcolor{comment}{//Get the width and height from the command-line}
  \hyperlink{classtsgl_1_1_canvas}{Canvas} c(0, 0, width, height, \textcolor{stringliteral}{"Command-line Example"}, FRAME);  \textcolor{comment}{//Pass them as parameters}
  c.start();
  c.wait();
\}
\end{DoxyCode}


Since the types of elements in argv are char pointers, we need to convert them into integers for this example in order to use them for the width and the height of the Canvas.

{\ttfamily atoi()} converts alphabet characters into integers.

Compile the code. Now that we have added command-\/line argument capabilities to our code, we {\itshape M\+U\+S\+T} pass some of them.

Attempting to run the code without command-\/line arguments now will trigger a segmentation fault (an error).

To run a program with command-\/line arguments depends on your system\textquotesingle{}s O\+S. There are videos that can show you how to run an individual test file in the T\+S\+G\+L bin folder from the command-\/line\+:


\begin{DoxyItemize}
\item Linux/\+Mac\+: \href{https://www.youtube.com/watch?v=ASMtIoJFJVI}{\tt https\+://www.\+youtube.\+com/watch?v=\+A\+S\+Mt\+Io\+J\+F\+J\+V\+I}
\item Windows\+:
\end{DoxyItemize}

This code is being run on a Linux machine, so the tutorial will continue using this format.

When you run the code with command-\/line arguments, the screen should appear but in a different size.

But wait...what happens when someone accidentally forgets to put in a command-\/line argument? The code will seg fault regardless!

To avert this, we need to place a few checks in the code\+:


\begin{DoxyCode}
\textcolor{preprocessor}{#include <tsgl.h>}
\textcolor{keyword}{using namespace }\hyperlink{namespacetsgl}{tsgl};

\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} * argv[]) \{
  \textcolor{keywordtype}{int} width = (argc > 1) ? atoi(argv[1]) : 600; \textcolor{comment}{//Checks for command-line arguments}
  \textcolor{keywordtype}{int} height = (argc > 2) ? atoi(argv[2]) : 800;
  \hyperlink{classtsgl_1_1_canvas}{Canvas} c(0, 0, width, height, \textcolor{stringliteral}{"Command-line Example"}, FRAME);  \textcolor{comment}{//Pass them as parameters}
  c.start();
  c.wait();
\}
\end{DoxyCode}


Now compile and run the code without command-\/line arguments. The window should still appear without causing a seg fault.

The checks are essentially conditional operators that are laid out as follows\+:

(conditional statement) ? expression\+\_\+if\+\_\+true \+: expression\+\_\+if\+\_\+false;

What this means is that it evaluates a conditional statement (usually a boolean expression) and if it evaluates to true then it assigns the first expression and if it evaluates to false then it assigns the second expression to the variable.

In a nutshell, think of it as a one-\/line if-\/else statement.

Now, what about invalid widths and heights? We can\textquotesingle{}t have a negative value or 0!

To avert this, we need one more check\+:


\begin{DoxyCode}
\textcolor{preprocessor}{#include <tsgl.h>}
\textcolor{keyword}{using namespace }\hyperlink{namespacetsgl}{tsgl};

\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} * argv[]) \{
  \textcolor{keywordtype}{int} width = (argc > 1) ? atoi(argv[1]) : 600;  \textcolor{comment}{//Checks for command-line arguments}
  \textcolor{keywordtype}{int} height = (argc > 2) ? atoi(argv[2]) : 800;
  \textcolor{keywordflow}{if}(width <= 0 || height <= 0) \{  \textcolor{comment}{//Check for negative or zero values}
    width = height = 800;  \textcolor{comment}{//Set defaults if invalid widths or heights}
  \}
  \hyperlink{classtsgl_1_1_canvas}{Canvas} c(0, 0, width, height, \textcolor{stringliteral}{"Command-line Example"}, FRAME);  \textcolor{comment}{//Pass them as parameters}
  c.start();
  c.wait();
\}
\end{DoxyCode}


Compile and run the code with a negative value or 0. The window should still appear without causing any problems.

In sum, to add command-\/line arguments to your animation, you {\itshape M\+U\+S\+T} edit the main() method signature so that it looks like this\+:


\begin{DoxyCode}
\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} * argv[]) \{

\}
\end{DoxyCode}


Then, you can use the second argument, {\ttfamily argv}, in order to get arguments passed from the command-\/line.

You must then include any checks to make sure there have been command-\/line arguments passed and then make sure those arguments are valid for you animation.

That concludes this tutorial!

In the final one, \char`\"{}\+Bringing It All Together\char`\"{}, we recap everything we\textquotesingle{}ve seen into an example with threading! 