<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>TSGL: Animation-Loops</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TSGL
   </div>
   <div id="projectbrief">A thread-safe graphics library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Animation-Loops </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Let's make a loop-da-loop!</p>
<p>Now that you know how to draw simple shapes and use colors, it's time to learn how to make animations!</p>
<p>***Linux/Mac users:*** Follow the steps from the previous tutorials. Name the folder "Tutorial5" and the file "animation.cpp". Replace "program" in the "TARGET" line of the Makefile with "animation".</p>
<p>***Windows users:*** Follow the steps from the previous tutorials. Name the Solution folder "Tutorial5" and the Visual Studio project "Animation". After adding the Property sheet, name the .cpp file "animation.cpp".</p>
<p>***All three platforms:*** Follow the steps in the [[Building Programs]] page on how to compile and run the program (Linux/Mac users, this is a single-file program).</p>
<p>Before we begin, allow us to explain drawing loops.</p>
<p>Drawing loops are what allow us to make animations.</p>
<p>They are essentially while loops that execute code as long as the Canvas remains open.</p>
<p>Let's look at an example:</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span>(canvasName.isOpen()) {</div>
<div class="line">   canvasName.sleep();</div>
<div class="line">  <span class="comment">//Code to execute as long as the Canvas is open...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>This is the skeleton code for a drawing loop. The while loop executes its code as long as the accessor method, <code>isOpen()</code>, returns <code>true</code>. This method essentially checks if the Canvas window is still open and returns <code>true</code> if it is.</p>
<p>The <code>sleep()</code> method tells the Canvas to wait until something is ready to be drawn and then draw it once its ready.</p>
<p>Drawing loops are key to making a Canvas continually draw something until its closed. Let's make one!</p>
<p>First, let's start by making and initializing a Canvas:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 600, <span class="stringliteral">&quot;Animation Loop Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Now, let's introduce our drawing loop:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 600, <span class="stringliteral">&quot;Animation Loop Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  <span class="comment">//Drawing loop</span></div>
<div class="line">  <span class="keywordflow">while</span>(c.isOpen()) {</div>
<div class="line">    c.sleep();</div>
<div class="line">  }</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Now, let's have the Canvas draw something:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 600, <span class="stringliteral">&quot;Animation Loop Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  <span class="comment">//Drawing loop</span></div>
<div class="line">  <span class="keywordflow">while</span>(c.isOpen()) {</div>
<div class="line">    c.sleep();</div>
<div class="line">    <span class="comment">//Let&#39;s draw a circle!</span></div>
<div class="line">    c.drawCircle(250, 300, 50, 32);</div>
<div class="line">  }</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Compile and run the code. A black circle should appear in the center.</p>
<p>But wait...it's not doing anything. It's just drawing the same thing over and over again!</p>
<p>That's because we haven't told the Canvas to move something in our drawing loop.</p>
<p>In order to make something move, we can change the x and y-coordinates so that the Canvas redraws it every frame, like so:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 600, <span class="stringliteral">&quot;Animation Loop Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  <span class="comment">//Store the x and y-coordinate values in variables outside of the loop</span></div>
<div class="line">  <span class="keywordtype">int</span> x = 250, y = 300;</div>
<div class="line">  <span class="comment">//Drawing loop</span></div>
<div class="line">  <span class="keywordflow">while</span>(c.isOpen()) {</div>
<div class="line">    c.sleep();</div>
<div class="line">    <span class="comment">//Let&#39;s draw a circle!</span></div>
<div class="line">    <span class="comment">//Pass the x and y coordinates</span></div>
<div class="line">    c.drawCircle(x, y, 50, 32);</div>
<div class="line">    <span class="comment">//And change the x-coordinate once the circle has been drawn</span></div>
<div class="line">    x += 5;</div>
<div class="line">  }</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p> Recompile and run the code. The circle should move from left to right.</p>
<p>We animated something! But...the Canvas keeps drawing a new circle with the new x-coordinate over the old circle with the old x-coordinate so now it looks like a tube. Is there anyway we can make it so that the Canvas just redraws the same circle with a new x-coordinate every frame?</p>
<p>Of course there is:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 600, <span class="stringliteral">&quot;Animation Loop Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  <span class="comment">//Store the x and y-coordinate values in variables outside of the loop</span></div>
<div class="line">  <span class="keywordtype">int</span> x = 250, y = 300;</div>
<div class="line">  <span class="comment">//Drawing loop</span></div>
<div class="line">  <span class="keywordflow">while</span>(c.isOpen()) {</div>
<div class="line">    c.sleep();</div>
<div class="line">    <span class="comment">//Let&#39;s draw a circle!</span></div>
<div class="line">    <span class="comment">//Pass the x and y coordinates</span></div>
<div class="line">    c.drawCircle(x, y, 50, 32);</div>
<div class="line">    <span class="comment">//And change the x-coordinate once the circle has been drawn</span></div>
<div class="line">    x += 5;</div>
<div class="line">    c.clear(); <span class="comment">//New statement</span></div>
<div class="line">  }</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Recompile and run the code. Now the circle appears to be moving on its own!</p>
<p>The <code>clear()</code> method tells the Canvas to clear the screen so that its blank again.</p>
<p>By placing that method call at the end of the draw loop, the Canvas will draw a circle, change the x-coordinate, clear itself, and then redraw the circle with the new x-coordinate in the next frame.</p>
<p>The circle just moves off screen though...is there anyway to make it so that once it goes off screen it gets redrawn back onto the screen?</p>
<p>Certainly:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 600, <span class="stringliteral">&quot;Animation Loop Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  <span class="comment">//Store the x and y-coordinate values in variables outside of the loop</span></div>
<div class="line">  <span class="keywordtype">int</span> x = 250, y = 300;</div>
<div class="line">  <span class="comment">//Drawing loop</span></div>
<div class="line">  <span class="keywordflow">while</span>(c.isOpen()) {</div>
<div class="line">    c.sleep();</div>
<div class="line">    <span class="comment">//Check to see if we are off screen</span></div>
<div class="line">    <span class="keywordflow">if</span> (x &gt;= c.getWindowWidth()) {</div>
<div class="line">       x = 250; <span class="comment">//If so, reset the x-coordinate</span></div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//Let&#39;s draw a circle!</span></div>
<div class="line">    <span class="comment">//Pass the x and y coordinates</span></div>
<div class="line">    c.drawCircle(x, y, 50, 32);</div>
<div class="line">    <span class="comment">//And change the x-coordinate once the circle has been drawn</span></div>
<div class="line">    x += 5;</div>
<div class="line">    c.clear(); <span class="comment">//New statement</span></div>
<div class="line">  }</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p><code>c.getWindowWidth()</code> is the accessor for the width of the current Canvas. If the x-coordinate value is greater than or equal to that value, then it gets reset back to 250 and so appears to be animated!</p>
<p>There is also another accessor method, <code>getWindowHeight()</code>, which gets the height of the current Canvas.</p>
<p>In sum, in order to have an animation, follow these steps:</p>
<p>1). Create and initialize a Canvas object.</p>
<p>2). Call the <code>start()</code> and <code>wait()</code> methods.</p>
<p>3). In between the calls to the <code>start()</code> and <code>wait()</code> methods, place the drawing loop:</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span>(canvasName.isOpen()) {</div>
<div class="line">  canvasName.sleep();</div>
<div class="line">  <span class="comment">//Code to draw something....</span></div>
<div class="line">  canvasName.clear(); <span class="comment">//At the very end of the loop</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>4). Done!</p>
<p>There is an optional parameter in the Canvas constructor that controls the speed at which the circle moves, and that is the <code>timerLength</code> parameter. It essentially sets the length of time that the <code>c.sleep()</code> call will cause the Canvas to sleep each iteration of the animation loop.</p>
<p>TSGL has a constant for the standard length of time that the timer should keep: <code>FRAME</code>. When we pass this constant as the timer length parameter, the internal timer will expire every 1/60ths of a second and the Canvas will update itself. The standard frame rate of the TSGL library is 60 frames a second.</p>
<p>Let's see what happens when we pass that constant as a parameter:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 600, <span class="stringliteral">&quot;Animation Loop Example&quot;</span>, FRAME);</div>
<div class="line">  c.start();</div>
<div class="line">  <span class="comment">//Store the x and y-coordinate values in variables outside of the loop</span></div>
<div class="line">  <span class="keywordtype">int</span> x = 250, y = 300;</div>
<div class="line">  <span class="comment">//Drawing loop</span></div>
<div class="line">  <span class="keywordflow">while</span>(c.isOpen()) {</div>
<div class="line">    c.sleep();</div>
<div class="line">    <span class="comment">//Check to see if we are off screen</span></div>
<div class="line">    <span class="keywordflow">if</span> (x &gt;= c.getWindowWidth()) {</div>
<div class="line">       x = 250; <span class="comment">//If so, reset the x-coordinate</span></div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//Let&#39;s draw a circle!</span></div>
<div class="line">    <span class="comment">//Pass the x and y coordinates</span></div>
<div class="line">    c.drawCircle(x, y, 50, 32);</div>
<div class="line">    <span class="comment">//And change the x-coordinate once the circle has been drawn</span></div>
<div class="line">    x += 5;</div>
<div class="line">    c.clear(); <span class="comment">//New statement</span></div>
<div class="line">  }</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Recompile and run. The circle will still move at the same speed.</p>
<p>However, if we alter the timer length parameter, we can change the speed of the animation!</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_canvas.html">Canvas</a> c(0, 0, 500, 600, <span class="stringliteral">&quot;Animation Loop Example&quot;</span>, FRAME / 2);</div>
<div class="line">  c.start();</div>
<div class="line">  <span class="comment">//Store the x and y-coordinate values in variables outside of the loop</span></div>
<div class="line">  <span class="keywordtype">int</span> x = 250, y = 300;</div>
<div class="line">  <span class="comment">//Drawing loop</span></div>
<div class="line">  <span class="keywordflow">while</span>(c.isOpen()) {</div>
<div class="line">    c.sleep();</div>
<div class="line">    <span class="comment">//Check to see if we are off screen</span></div>
<div class="line">    <span class="keywordflow">if</span> (x &gt;= c.getWindowWidth()) {</div>
<div class="line">       x = 250; <span class="comment">//If so, reset the x-coordinate</span></div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//Let&#39;s draw a circle!</span></div>
<div class="line">    <span class="comment">//Pass the x and y coordinates</span></div>
<div class="line">    c.drawCircle(x, y, 50, 32);</div>
<div class="line">    <span class="comment">//And change the x-coordinate once the circle has been drawn</span></div>
<div class="line">    x += 5;</div>
<div class="line">    c.clear(); <span class="comment">//New statement</span></div>
<div class="line">  }</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Recompile and run. Dividing the <code>FRAME</code> constant by 2 will speed up the animation!</p>
<p>We encourage you to try other divisors and see how they affect the animation rate!</p>
<p>As mentioned, there is a special kind of Canvas: The CartesianCanvas. Drawing loops and animations are handled in the same way (only with a Cartesian coordinate system).</p>
<p>That completes this tutorial!</p>
<p>Next up, in [[Using Functions]], we explain the special Canvas: The CartesianCanvas! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 5 2016 14:23:35 for TSGL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
